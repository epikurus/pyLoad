<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <!-- TODO Include this font -->
    <link href="http://fonts.googleapis.com/css?family=Abel" rel="stylesheet" type="text/css"/>
    <link href="static/css/font.css" rel="stylesheet" type="text/css"/>
    <link href="static/css/default/style.css" rel="stylesheet" type="text/css" media="screen"/>
	<link href="static/css/black-tie/jquery-ui-1.8.22.custom.css" rel="stylesheet" type="text/css" media="screen"/>

    <script type="text/javascript" src="static/js/libs/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="static/js/libs/jquery.flot.min.js"></script>
    <script type="text/javascript" src="static/js/libs/jquery-ui-1.8.22.custom.min.js"></script>

	<script>
	
	// id has to look like: #check_name
	// value is true, false or toggle
	// iconclass has to be pyload-icon-name-activated and pyload-icon-name-deactivated
	function setCheckedButton(id, value) {
		var splitted = id.split("_")
		if (value == "true") {
			$( id ).setAttribute("class",'pyload-icon-' + splitted[1] + "-activated");
			$( id ).checked = true;
		} else if (value == "false") {
			$( id ).setAttribute("class",'pyload-icon-' + splitted[1] + "-deactivated");
			$( id ).checked = false;
		} else { //toggle
			if ($( id ).checked == true) {
				$( id ).setAttribute("class",'pyload-icon-' + splitted[1] + "-deactivated");
				$( id ).checked = false;
			} else {
				$( id ).setAttribute("class",'pyload-icon-' + splitted[1] + "-activated");
				$( id ).checked = true;
			}
		}
	}
	
	</script>
	
    <title>{% block title %}pyLoad {{ _("Webinterface") }}{% endblock %}</title>

    {% block head %}
    {% endblock %}
</head>
<body>
<div id="wrap">
    <header>
        <div class="center">
            <img class="logo" alt="" src="static/img/default/logo.png" width="120px" height="120px">
            <span class="title">pyLoad</span>
			<div id="speedgraph"></div>
			
			<div class="header_block">
                <div id="check_reconnecting" class="pyload-icon-reconnecting-deactivated"></div>
                <div id="check_downloading" class="pyload-icon-downloading-deactivated"></div>
            </div>
			
            <div class="header_block">
                <div id="speedmeter">
					<div id="speedmeter_icon" class="header-icon"></div>
					<span id="speedmeter_value" class="header_text">250KiB/s</span>
				</div>
                <div id="downloads">
					<div id="downloads_icon" class="header-icon"></div>
					<span id="downloads_value" class="header_text">3/126/212</span>
				</div>
			</div>
        </div>
    </header>
    <div id="push"></div>
    <div id="content">
        {% for message in messages %}
            <b><p>{{ message }}</p></b>
        {% endfor %}

        <h1>Test!</h1>

        {% block content %}
        {% endblock content %}
    </div>
</div>
<footer>
    <div class="center">
        <img class="logo" src="static/img/default/logo_grey.png" width="60px" height="60px"/>
        <div class="block copyright">
            Â© 2008-2012<br>
            The pyLoad Team<br>
        </div>

        <div class="block">
            <h2 class="block-title">Powered by</h2>
            asd <br>
            dsfdsf <br>
            sdf dsg <br>
        </div>

        <div class="block">
            <h2 class="block-title">pyLoad</h2>
            asd <br>
            dsfdsf <br>
            sdf dsg <br>
        </div>

        <div class="block">
            <h2 class="block-title">Community</h2>
            asd <br>
            dsfdsf <br>
            sdf dsg <br>
        </div>

        <div class="block">
            <h2 class="block-title">Development</h2>
            asd <br>
            dsfdsf <br>
            sdf dsg <br>
        </div>
    </div>
</footer>
<script type="text/javascript">
    $(function () {
        var totalPoints = 100;
        var data = [];
        function getRandomData() {
            if (data.length > 0)
                data = data.slice(1);

            // do a random walk
            while (data.length < totalPoints) {
                var prev = data.length > 0 ? data[data.length - 1] : 50;
                var y = prev + Math.random() * 10 - 5;
                if (y < 0)
                    y = 0;
                if (y > 100)
                    y = 100;
                data.push(y);
            }

            // zip the generated y values with the x values
            var res = [];
            for (var i = 0; i < data.length; ++i)
                res.push([i, data[i]])
            return res;
        }

    var updateInterval = 1500;

    var speedgraph = $.plot($("#speedgraph"), [getRandomData()], {
        series: {
            lines: { show: true, lineWidth: 2 },
            shadowSize: 0
        },
        xaxis: { ticks: [], mode: "time" },
        yaxis: { ticks: [], min: 0, autoscaleMargin: 0.1 },
        grid: {
            borderColor: "#757575",
            labelMargin: 0,
            axisMargin: 0,
            minBorderMargin: 0
        }
    });

    function update() {
        speedgraph.setData([ getRandomData() ]);
        // since the axes don't change, we don't need to call plot.setupGrid()
        speedgraph.draw();

        setTimeout(update, updateInterval);
    }

    update();

    });

</script>
{% block deferred %}
{% endblock deferred %}
</body>
</html>
