<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <!-- TODO Include this font -->
    <link href="http://fonts.googleapis.com/css?family=Abel" rel="stylesheet" type="text/css"/>
    <link href="static/css/font.css" rel="stylesheet" type="text/css"/>
    <link href="static/css/default/style.css" rel="stylesheet" type="text/css" media="screen"/>
    <link href="static/css/black-tie/jquery-ui-1.8.22.custom.css" rel="stylesheet" type="text/css" media="screen"/>
    <link href="static/css/jquery.qtip.min.css" rel="stylesheet" type="text/css" media="screen"/>
    <link href="static/css/omniwindow.css" rel="stylesheet" type="text/css" media="screen"/>

    <script type="text/javascript" src="static/js/libs/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="static/js/libs/jquery.flot.min.js"></script>
    <script type="text/javascript" src="static/js/libs/jquery-ui-1.8.22.custom.min.js"></script>
    <script type="text/javascript" src="static/js/libs/jquery.qtip.min.js"></script>
    <script type="text/javascript" src="static/js/libs/jquery.omniwindow.js"></script>

    <script type="text/javascript" src="static/js/libs/underscore-min.js"></script>
    <script type="text/javascript" src="static/js/libs/backbone-min.js"></script>


    <title>{% block title %}pyLoad {{ _("Webinterface") }}{% endblock %}</title>

    {% block head %}
    {% endblock %}
</head>
<body>
<div id="wrap">
    <header>
        <div class="center">
            <div class="logo"></div>
            <span class="title">pyLoad</span>

            {% if user %}
                <div id="notification_div">
                    No runnings tasks
                    <div id="globalprogress"></div>
                </div>
                <script>
                    $(document).ready(function () {
                        $("#globalprogress").progressbar({ value:37 });
                    });
                </script>

                <div class="header_block">
                    <div class="header_icon" id="header_user">
                        <span>{{ user.name }}</span>
                    </div>
                    <div class="header_text">
                        <a href="/logout" id="header_logout">{{ _("Logout") }}</a>
                    </div>
                </div>
                <div id="speedgraph"></div>
                <div class="header_block">
                    <div class="header_icon" id="header_speed">
                        <span class="header_text">500 kb/s</span>
                    </div>
                    <div class="header_icon" id="header_qeuue">
                        <span class="header_text">5 / 125</span>
                    </div>
                </div>
            {% endif %}
        </div>
    </header>
    <div id="push"></div>
    <div id="content">
        <div class="modal window-container zoomout ow-closed">
            <h1>Close me!</h1>
            <a class='close-button' href='#'>X</a>
        </div>
        <a id="dialog_open" href="#">Show Dialog</a>
        {% block content %}
        {% endblock content %}
    </div>
</div>
<footer>
    <div class="center">
        <div class="logo"></div>
        <div class="block copyright">
            Â© 2008-2012<br>
            The pyLoad Team<br>
        </div>

        <div class="block">
            <h2 class="block-title">Powered by</h2>
            asd <br>
            dsfdsf <br>
            sdf dsg <br>
        </div>

        <div class="block">
            <h2 class="block-title">pyLoad</h2>
            <a href="/toggle_mobile">{{_("Mobile Version")}}</a> <br>
            dsfdsf <br>
            sdf dsg <br>
        </div>

        <div class="block">
            <h2 class="block-title">Community</h2>
            asd <br>
            dsfdsf <br>
            sdf dsg <br>
        </div>

        <div class="block">
            <h2 class="block-title">Development</h2>
            asd <br>
            dsfdsf <br>
            sdf dsg <br>
        </div>
    </div>
</footer>
<script type="text/javascript">
    $(function () {
        var totalPoints = 100;
        var data = [];

        function getRandomData() {
            if (data.length > 0)
                data = data.slice(1);

            // do a random walk
            while (data.length < totalPoints) {
                var prev = data.length > 0 ? data[data.length - 1] : 50;
                var y = prev + Math.random() * 10 - 5;
                if (y < 0)
                    y = 0;
                if (y > 100)
                    y = 100;
                data.push(y);
            }

            // zip the generated y values with the x values
            var res = [];
            for (var i = 0; i < data.length; ++i)
                res.push([i, data[i]])
            return res;
        }

        var updateInterval = 1500;

        var speedgraph = $.plot($("#speedgraph"), [getRandomData()], {
            series:{
                lines:{ show:true, lineWidth:2 },
                shadowSize:0,
                color:"#fee247"
            },
            xaxis:{ ticks:[], mode:"time" },
            yaxis:{ ticks:[], min:0, autoscaleMargin:0.1 },
            grid:{
                show:true,
//            borderColor: "#757575",
                borderColor:"white",
                borderWidth:1,
                labelMargin:0,
                axisMargin:0,
                minBorderMargin:0
            }
        });

        function update() {
            speedgraph.setData([ getRandomData() ]);
            // since the axes don't change, we don't need to call plot.setupGrid()
            speedgraph.draw();

            setTimeout(update, updateInterval);
        }

        update();

    });
</script>
<script type="text/javascript">
    $(function () {
        $("#header_speed").qtip({
            content:{
                text:"Download speed"
            },
            position:{
                my:'top center',
                at:'bottom center'
            },
            show:{ delay:1000},
            style:{
                classes:'ui-tooltip-dark ui-tooltip-shadow'
            }
        });

        $("#notification_div").qtip({
            content:{
                title: {text: "Running Tasks", button:true},
                text:  "Content"
            },
            position:{
                my:'top center',
                at:'bottom center'
            },
            show:{ delay:500, effect: function(offset) {
                $(this).slideDown(250); // "this" refers to the tooltip
                    }},
            style:{
                classes:'ui-tooltip-light ui-tooltip-shadow',
                width: $("#notification_div").outerWidth(),
                height: 100
            },
            hide: false
        });
    });
</script>
<script type="text/javascript">
    $(function () {
        var dialog = $('div.modal').omniWindow({
            overlay:{
                animations:{
                    hide:function (subjects, internalCallback) {
                        subjects.overlay.fadeOut(400, function () {
                            internalCallback(subjects); // call internal callback
                        })
                    },
                    show:function (subjects, internalCallback) {
                        subjects.overlay.fadeIn(250, function () {
                            internalCallback(subjects); // call internal callback
                        });
                    }}},
            modal:{
                animations:{
                    hide:function (subjects, internalCallback) {
                        subjects.modal.removeClass('window-container-visible');
                        subjects.modal.fadeOut(250, function () {
                            internalCallback(subjects); // call internal callback
                        });
                    },

                    show:function (subjects, internalCallback) {
                        subjects.modal.fadeIn(0, function () {
                            subjects.modal.addClass('window-container-visible');
                            internalCallback(subjects); // call internal callback
                        });
                    }}
            }});

        $('#dialog_open').click(function (e) {
            e.preventDefault();
            dialog.trigger('show');
        });

        $('.close-button').click(function (e) {
            e.preventDefault();
            dialog.trigger('hide');
        });
    });
</script>
<div class="ow-overlay ow-closed"></div>
{% block deferred %}
{% endblock deferred %}
</body>
</html>
